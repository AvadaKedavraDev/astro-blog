---
// 返回顶部组件 - 极简设计
import { Icon } from "astro-icon/components";
---

<button
  id="scroll-to-top"
  class="fixed bottom-8 right-8 p-3 rounded-full card-base z-50
         opacity-0 translate-y-4 pointer-events-none transition-all duration-300
         hover:scale-110 !hover:shadow-lg group"
  aria-label="返回顶部"
>
  <Icon 
    name="lucide:arrow-up" 
    class="w-5 h-5 transition-transform duration-300 group-hover:-translate-y-1 group-hover:animate-bounce" 
  />
</button>

<script is:inline>
  (function() {
    const button = document.getElementById('scroll-to-top');
    if (!button) return;
    
    let ticking = false;
    
    function toggleVisibility() {
      const scrollTop = window.scrollY;
      if (scrollTop > 300) {
        button.classList.remove('opacity-0', 'translate-y-4', 'pointer-events-none');
        button.classList.add('opacity-100', 'translate-y-0');
      } else {
        button.classList.add('opacity-0', 'translate-y-4', 'pointer-events-none');
        button.classList.remove('opacity-100', 'translate-y-0');
      }
      ticking = false;
    }
    
    window.addEventListener('scroll', function() {
      if (!ticking) {
        requestAnimationFrame(toggleVisibility);
        ticking = true;
      }
    }, { passive: true });
    
    button.addEventListener('click', function() {
      window.scrollTo({ top: 0, behavior: 'smooth' });
    });
  })();
</script>
