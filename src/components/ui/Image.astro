---
/**
 * @component Image
 * @description 图片组件，支持图片加载失败时的占位符显示
 * @props src - 图片路径
 * @props alt - 图片描述
 * @props width - 宽度（可选）
 * @props height - 高度（可选）
 * @props class - 自定义类名（可选）
 */
interface Props {
  src: string;
  alt: string;
  width?: string;
  height?: string;
  class?: string;
}

const { src, alt, width, height, class: className = '' } = Astro.props;

// 判断是否是完整 URL
const isFullUrl = src.startsWith('http://') || src.startsWith('https://');

// 如果不是完整 URL，且以 / 开头，则认为是本地图片
// 如果不是完整 URL，且不以 / 开头，则拼接图床域名
const imageSrc = isFullUrl 
  ? src 
  : src.startsWith('/') 
    ? src 
    : `https://cdn.image.moonpeak.cn/${src}`;
---

<img 
  src={imageSrc} 
  alt={alt} 
  width={width} 
  height={height}
  class={className}
  loading="lazy"
/>
