---
import BaseLayout from "@layouts/BaseLayout.astro";
import TypeWriter from "@components/ui/TypeWriter.astro";

const SERVER_CONFIG = {
    host: "moonpeak.cn",
    idServer: "moonpeak.cn:21116",
    relayServer: "moonpeak.cn:21117",
    key: "wqselgGrSikeex3pCUtvsKVIr9F2dvPmoq44TZQN2Jw="
};
---

<BaseLayout title="è¿œç¨‹æ¡Œé¢ä½¿ç”¨æŒ‡å— - MoonPeak">
    <!-- Hero Section -->
    <section class="min-h-[60vh] flex flex-col justify-center items-center relative px-6 pt-20">
        <div class="absolute inset-0 overflow-hidden pointer-events-none">
            <div class="absolute top-1/4 left-1/4 w-96 h-96 bg-linear-to-br from-neutral-200/50 to-transparent dark:from-neutral-800/30 rounded-full blur-3xl"></div>
        </div>

        <div class="relative z-10 text-center max-w-3xl mx-auto">
            <div class="mb-6">
        <span class="inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-muted text-muted-foreground border border-border">
          æ‰‹åŠ¨é…ç½®æŒ‡å—
        </span>
            </div>

            <h1 class="text-3xl md:text-4xl lg:text-5xl font-semibold tracking-tight mb-6">
        <span class="gradient-text">
          <TypeWriter text="ä¸‰æ­¥è¿æ¥è¿œç¨‹æ¡Œé¢" speed={120} delay={300}/>
        </span>
            </h1>

            <p class="text-base md:text-lg text-muted-foreground max-w-lg mx-auto mb-8 leading-relaxed">
                ä¸‹è½½å®˜æ–¹å®¢æˆ·ç«¯ â†’ å¡«å…¥æœåŠ¡å™¨ä¿¡æ¯ â†’ å¼€å§‹è¿œç¨‹æ§åˆ¶
            </p>

            <a href="#guide" class="btn px-8 py-3 text-base rounded-full">
                æŸ¥çœ‹é…ç½®æ­¥éª¤
            </a>
        </div>
    </section>

    <!-- Quick Download -->
    <section id="guide" class="py-20 px-6 border-t border-border bg-muted/30">
        <div class="container-narrow">
            <h2 class="text-2xl font-semibold tracking-tight mb-8 text-center">ç¬¬ä¸€æ­¥ï¼šä¸‹è½½å®¢æˆ·ç«¯</h2>

            <div class="grid grid-cols-1 md:grid-cols-3 gap-4 max-w-3xl mx-auto">
                <a href="https://github.com/rustdesk/rustdesk/releases/download/1.4.5/rustdesk-1.4.5-x86_64.exe"
                   class="group p-6 bg-card rounded-2xl border border-border hover:border-blue-500/50 transition-all text-center">
                    <div class="w-12 h-12 rounded-xl bg-blue-100 dark:bg-blue-900/30 text-blue-600 flex items-center justify-center mx-auto mb-4">
                        <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M0 0h24v24H0z" fill="none"/>
                            <path d="M20 18c1.1 0 1.99-.9 1.99-2L22 5c0-1.1-.9-2-2-2H4c-1.1 0-2 .9-2 2v11c0 1.1.9 2 2 2H0c0 1.1.9 2 2 2h20c1.1 0 2-.9 2-2h-4zM4 5h16v11H4V5z"/>
                        </svg>
                    </div>
                    <h3 class="font-semibold mb-1">Windows</h3>
                    <p class="text-xs text-muted-foreground mb-3">64ä½ å®‰è£…åŒ…</p>
                    <span class="text-xs text-blue-600 dark:text-blue-400 font-medium group-hover:underline">ä¸‹è½½ v1.4.5</span>
                </a>

                <a href="https://github.com/rustdesk/rustdesk/releases/download/1.4.5/rustdesk-1.4.5-universal.dmg"
                   class="group p-6 bg-card rounded-2xl border border-border hover:border-gray-500/50 transition-all text-center">
                    <div class="w-12 h-12 rounded-xl bg-gray-100 dark:bg-gray-800 text-gray-600 flex items-center justify-center mx-auto mb-4">
                        <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M18.71 19.5c-.83 1.24-1.71 2.45-3.05 2.47-1.34.03-1.77-.79-3.29-.79-1.53 0-2 .77-3.27.82-1.31.05-2.3-1.32-3.14-2.53C4.25 17 2.94 12.45 4.7 9.39c.87-1.52 2.43-2.48 4.12-2.51 1.28-.02 2.5.87 3.29.87.78 0 2.26-1.07 3.81-.91.65.03 2.47.26 3.64 1.98-.09.06-2.17 1.28-2.15 3.81.03 3.02 2.65 4.03 2.68 4.04-.03.07-.42 1.44-1.38 2.83M13 3.5c.73-.83 1.94-1.46 2.94-1.5.13 1.17-.34 2.35-1.04 3.19-.69.85-1.83 1.51-2.95 1.42-.15-1.15.41-2.35 1.05-3.11z"/>
                        </svg>
                    </div>
                    <h3 class="font-semibold mb-1">macOS</h3>
                    <p class="text-xs text-muted-foreground mb-3">Universal ç‰ˆæœ¬</p>
                    <span class="text-xs text-gray-600 dark:text-gray-400 font-medium group-hover:underline">ä¸‹è½½ v1.4.5</span>
                </a>

                <a href="https://github.com/rustdesk/rustdesk/releases/latest" target="_blank"
                   class="group p-6 bg-card rounded-2xl border border-border hover:border-orange-500/50 transition-all text-center">
                    <div class="w-12 h-12 rounded-xl bg-orange-100 dark:bg-orange-900/30 text-orange-600 flex items-center justify-center mx-auto mb-4">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                  d="M9 3v2m6-2v2M9 19v2m6-2v2M5 9H3m2 6H3m18-6h-2m2 6h-2M7 19h10a2 2 0 002-2V7a2 2 0 00-2-2H7a2 2 0 00-2 2v10a2 2 0 002 2zM9 9h6v6H9V9z"/>
                        </svg>
                    </div>
                    <h3 class="font-semibold mb-1">Linux</h3>
                    <p class="text-xs text-muted-foreground mb-3">.deb / .rpm / AppImage</p>
                    <span class="text-xs text-orange-600 dark:text-orange-400 font-medium group-hover:underline">æŸ¥çœ‹æ‰€æœ‰ç‰ˆæœ¬</span>
                </a>
            </div>

            <div class="mt-6 text-center">
                <p class="text-xs text-muted-foreground">
                    å¦‚æœ GitHub ä¸‹è½½é€Ÿåº¦æ…¢ï¼Œå¯ä½¿ç”¨
                    <a href="https://ghproxy.com/https://github.com/rustdesk/rustdesk/releases/download/1.4.5/rustdesk-1.4.5-x86_64.exe"
                       class="underline hover:text-foreground">GHProxy é•œåƒ</a> æˆ–
                    <a href="https://ghps.cc/https://github.com/rustdesk/rustdesk/releases/download/1.4.5/rustdesk-1.4.5-x86_64.exe"
                       class="underline hover:text-foreground">å¤‡ç”¨é•œåƒ</a>
                </p>
            </div>
        </div>
    </section>

    <!-- Configuration Guide -->
    <section class="py-20 px-6 border-t border-border">
        <div class="container-narrow max-w-3xl">
            <h2 class="text-2xl font-semibold tracking-tight mb-12 text-center">ç¬¬äºŒæ­¥ï¼šé…ç½®æœåŠ¡å™¨</h2>

            <div class="space-y-8">
                <!-- Step 2.1 -->
                <div class="flex gap-6">
                    <div class="w-8 h-8 rounded-full bg-blue-100 dark:bg-blue-900/30 text-blue-600 flex items-center justify-center font-bold shrink-0">
                        1
                    </div>
                    <div>
                        <h3 class="font-semibold mb-2">æ‰“å¼€ RustDesk è®¾ç½®</h3>
                        <p class="text-sm text-muted-foreground mb-3">å®‰è£…å®Œæˆåæ‰“å¼€ RustDeskï¼Œç‚¹å‡»å³ä¸Šè§’èœå•ï¼ˆâ‰¡ï¼‰â†’
                            "è®¾ç½®"</p>
                    </div>
                </div>

                <!-- Step 2.2 -->
                <div class="flex gap-6">
                    <div class="w-8 h-8 rounded-full bg-blue-100 dark:bg-blue-900/30 text-blue-600 flex items-center justify-center font-bold shrink-0">
                        2
                    </div>
                    <div>
                        <h3 class="font-semibold mb-2">è¿›å…¥ç½‘ç»œè®¾ç½®</h3>
                        <p class="text-sm text-muted-foreground mb-3">å·¦ä¾§èœå•é€‰æ‹© "ç½‘ç»œ"ï¼Œæ‰¾åˆ° "ID/ä¸­ç»§æœåŠ¡å™¨" åŒºåŸŸ</p>
                    </div>
                </div>

                <!-- Step 2.3 -->
                <div class="flex gap-6">
                    <div class="w-8 h-8 rounded-full bg-blue-100 dark:bg-blue-900/30 text-blue-600 flex items-center justify-center font-bold shrink-0">
                        3
                    </div>
                    <div class="flex-1">
                        <h3 class="font-semibold mb-2">å¡«å†™æœåŠ¡å™¨ä¿¡æ¯</h3>
                        <p class="text-sm text-muted-foreground mb-4">è§£é”è®¾ç½®ï¼ˆç‚¹å‡» ğŸ”’ å›¾æ ‡ï¼‰ï¼Œå¡«å…¥ä»¥ä¸‹ä¿¡æ¯ï¼š</p>

                        <div class="bg-card rounded-xl border border-border divide-y divide-border">
                            <!-- ID Server -->
                            <div class="flex items-center justify-between p-4">
                                <div>
                                    <div class="text-xs text-muted-foreground mb-1">ID æœåŠ¡å™¨</div>
                                    <code class="font-mono text-sm" id="id-server-text">{SERVER_CONFIG.idServer}</code>
                                </div>
                                <button class="copy-btn text-xs px-3 py-1.5 rounded-md bg-muted hover:bg-muted/80 transition-colors"
                                        data-copy={SERVER_CONFIG.idServer}>
                                    å¤åˆ¶
                                </button>
                            </div>

                            <!-- Relay Server -->
                            <div class="flex items-center justify-between p-4">
                                <div>
                                    <div class="text-xs text-muted-foreground mb-1">ä¸­ç»§æœåŠ¡å™¨</div>
                                    <code class="font-mono text-sm"
                                          id="relay-server-text">{SERVER_CONFIG.relayServer}</code>
                                </div>
                                <button class="copy-btn text-xs px-3 py-1.5 rounded-md bg-muted hover:bg-muted/80 transition-colors"
                                        data-copy={SERVER_CONFIG.relayServer}>
                                    å¤åˆ¶
                                </button>
                            </div>

                            <!-- Key -->
                            <div class="p-4">
                                <div class="flex items-center justify-between mb-2">
                                    <div class="text-xs text-muted-foreground">Keyï¼ˆå…¬é’¥ï¼‰</div>
                                    <button id="toggle-key-btn"
                                            class="text-xs text-muted-foreground hover:text-foreground flex items-center gap-1">
                                        <svg id="eye-icon" class="w-3.5 h-3.5" fill="none" stroke="currentColor"
                                             viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                                  d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/>
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                                  d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"/>
                                        </svg>
                                        <span id="key-toggle-text">æ˜¾ç¤º</span>
                                    </button>
                                </div>
                                <div class="font-mono text-sm break-all bg-muted/50 p-3 rounded-lg" id="key-value"
                                     data-key={SERVER_CONFIG.key}>
                                    â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢
                                </div>
                                <button class="copy-btn mt-2 text-xs px-3 py-1.5 rounded-md bg-muted hover:bg-muted/80 transition-colors w-full"
                                        data-copy={SERVER_CONFIG.key} id="copy-key-btn" style="display: none;">
                                    å¤åˆ¶ Key
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Step 2.4 -->
                <div class="flex gap-6">
                    <div class="w-8 h-8 rounded-full bg-green-100 dark:bg-green-900/30 text-green-600 flex items-center justify-center font-bold shrink-0">
                        âœ“
                    </div>
                    <div>
                        <h3 class="font-semibold mb-2">ä¿å­˜å¹¶åº”ç”¨</h3>
                        <p class="text-sm text-muted-foreground">ç‚¹å‡» "åº”ç”¨" æˆ– "ç¡®å®š"ï¼Œè¿”å›ä¸»ç•Œé¢å³å¯çœ‹åˆ° "å°±ç»ª"
                            çŠ¶æ€</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Usage -->
    <section class="py-20 px-6 border-t border-border bg-muted/30">
        <div class="container-narrow max-w-3xl text-center">
            <h2 class="text-2xl font-semibold tracking-tight mb-6">ç¬¬ä¸‰æ­¥ï¼šå¼€å§‹è¿œç¨‹æ§åˆ¶</h2>

            <div class="bg-card rounded-2xl border border-border p-8 mb-8">
                <div class="flex flex-col md:flex-row items-center justify-center gap-8">
                    <div class="text-center">
                        <div class="w-16 h-16 rounded-full bg-blue-100 dark:bg-blue-900/30 text-blue-600 flex items-center justify-center mx-auto mb-3">
                            <span class="text-2xl">ğŸ“¤</span>
                        </div>
                        <h4 class="font-medium mb-1">è¢«æ§ç«¯</h4>
                        <p class="text-xs text-muted-foreground">åˆ†äº«æ‚¨çš„<br/><strong>è®¾å¤‡ ID</strong> å’Œ
                            <strong>å¯†ç </strong></p>
                    </div>

                    <div class="text-muted-foreground">â† è¿æ¥ â†’</div>

                    <div class="text-center">
                        <div class="w-16 h-16 rounded-full bg-green-100 dark:bg-green-900/30 text-green-600 flex items-center justify-center mx-auto mb-3">
                            <span class="text-2xl">ğŸ“¥</span>
                        </div>
                        <h4 class="font-medium mb-1">æ§åˆ¶ç«¯</h4>
                        <p class="text-xs text-muted-foreground">è¾“å…¥å¯¹æ–¹çš„<br/><strong>è®¾å¤‡ ID</strong> è¿æ¥</p>
                    </div>
                </div>
            </div>

            <p class="text-sm text-muted-foreground">
                é…ç½®å®Œæˆåï¼Œæ‚¨çš„ RustDesk ä¸»ç•Œé¢å·¦ä¾§ä¼šæ˜¾ç¤º<strong>è®¾å¤‡ ID</strong>å’Œ<strong>å¯†ç </strong>ï¼Œå°†å…¶æä¾›ç»™éœ€è¦è¿œç¨‹ååŠ©æ‚¨çš„äººã€‚
            </p>
        </div>
    </section>

    <!-- FAQ -->
    <section class="py-20 px-6 border-t border-border">
        <div class="container-narrow max-w-2xl">
            <h2 class="text-2xl font-semibold tracking-tight mb-8 text-center">å¸¸è§é—®é¢˜</h2>

            <div class="space-y-4">
                <details class="group bg-card rounded-xl border border-border overflow-hidden">
                    <summary
                            class="flex items-center justify-between p-5 cursor-pointer list-none hover:bg-muted/50 transition-colors">
                        <span class="font-medium text-sm">è¿æ¥å¤±è´¥æ€ä¹ˆåŠï¼Ÿ</span>
                        <svg class="w-4 h-4 text-muted-foreground group-open:rotate-180 transition-transform"
                             fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>
                        </svg>
                    </summary>
                    <div class="px-5 pb-5 text-sm text-muted-foreground leading-relaxed border-t border-border pt-3">
                        è¯·æ£€æŸ¥ï¼š1) æœåŠ¡å™¨åœ°å€æ˜¯å¦å¡«å†™æ­£ç¡®ï¼›2) Key æ˜¯å¦å®Œæ•´å¤åˆ¶ï¼›3) ç½‘ç»œé˜²ç«å¢™æ˜¯å¦æ”¾è¡Œ 21116/21117 ç«¯å£ï¼›4)
                        åŒæ–¹æ˜¯å¦éƒ½é…ç½®äº†ç›¸åŒçš„æœåŠ¡å™¨ã€‚
                    </div>
                </details>

                <details class="group bg-card rounded-xl border border-border overflow-hidden">
                    <summary
                            class="flex items-center justify-between p-5 cursor-pointer list-none hover:bg-muted/50 transition-colors">
                        <span class="font-medium text-sm">ç§»åŠ¨ç«¯å¦‚ä½•ä½¿ç”¨ï¼Ÿ</span>
                        <svg class="w-4 h-4 text-muted-foreground group-open:rotate-180 transition-transform"
                             fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>
                        </svg>
                    </summary>
                    <div class="px-5 pb-5 text-sm text-muted-foreground leading-relaxed border-t border-border pt-3">
                        åœ¨ App Store æˆ– Google Play ä¸‹è½½ RustDesk åº”ç”¨ï¼Œè¿›å…¥è®¾ç½® â†’ ç½‘ç»œ â†’ ID/ä¸­ç»§æœåŠ¡å™¨ï¼Œå¡«å…¥ç›¸åŒçš„æœåŠ¡å™¨ä¿¡æ¯å³å¯ã€‚
                    </div>
                </details>

                <details class="group bg-card rounded-xl border border-border overflow-hidden">
                    <summary
                            class="flex items-center justify-between p-5 cursor-pointer list-none hover:bg-muted/50 transition-colors">
                        <span class="font-medium text-sm">æ•°æ®å®‰å…¨å—ï¼Ÿ</span>
                        <svg class="w-4 h-4 text-muted-foreground group-open:rotate-180 transition-transform"
                             fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>
                        </svg>
                    </summary>
                    <div class="px-5 pb-5 text-sm text-muted-foreground leading-relaxed border-t border-border pt-3">
                        æ‰€æœ‰æ•°æ®é‡‡ç”¨ç«¯åˆ°ç«¯åŠ å¯†ï¼ˆTLS 1.3ï¼‰ï¼Œä¸”åªç»è¿‡ MoonPeak ç§æœ‰æœåŠ¡å™¨ï¼Œä¸ç»è¿‡ä»»ä½•ç¬¬ä¸‰æ–¹äº‘æœåŠ¡ã€‚
                    </div>
                </details>
            </div>
        </div>
    </section>
</BaseLayout>

<script is:inline>
    (function () {
        function init() {
            // 1. å¤åˆ¶åŠŸèƒ½
            const copyBtns = document.querySelectorAll('.copy-btn');
            copyBtns.forEach(btn => {
                btn.addEventListener('click', function (e) {
                    e.preventDefault();
                    const text = this.getAttribute('data-copy');
                    if (!text) return;

                    // æ£€æŸ¥ clipboard API æ˜¯å¦å¯ç”¨ï¼ˆéœ€è¦ HTTPS æˆ– localhostï¼‰
                    if (navigator.clipboard && window.isSecureContext) {
                        navigator.clipboard.writeText(text).then(() => showCopied(this)).catch(() => fallbackCopy(text, this));
                    } else {
                        fallbackCopy(text, this);
                    }
                });
            });

            function fallbackCopy(text, btn) {
                const textarea = document.createElement('textarea');
                textarea.value = text;
                textarea.style.position = 'fixed';
                textarea.style.left = '-9999px';
                textarea.style.top = '0';
                document.body.appendChild(textarea);
                textarea.focus();
                textarea.select();

                try {
                    const successful = document.execCommand('copy');
                    if (successful) {
                        showCopied(btn);
                    } else {
                        console.error('å¤åˆ¶å¤±è´¥');
                        btn.textContent = 'å¤åˆ¶å¤±è´¥';
                        setTimeout(() => btn.textContent = 'å¤åˆ¶', 1500);
                    }
                } catch (err) {
                    console.error('å¤åˆ¶å¤±è´¥:', err);
                    btn.textContent = 'è¯·æ‰‹åŠ¨å¤åˆ¶';
                    setTimeout(() => btn.textContent = 'å¤åˆ¶', 2000);
                }

                document.body.removeChild(textarea);
            }

            function showCopied(btn) {
                const originalText = btn.textContent;
                btn.textContent = 'å·²å¤åˆ¶';
                setTimeout(() => {
                    btn.textContent = originalText;
                }, 1500);
            }

            // 2. Key æ˜¾ç¤º/éšè—åˆ‡æ¢
            const toggleBtn = document.getElementById('toggle-key-btn');
            const keyValue = document.getElementById('key-value');
            const keyToggleText = document.getElementById('key-toggle-text');
            const copyKeyBtn = document.getElementById('copy-key-btn');
            let keyVisible = false;

            if (toggleBtn && keyValue) {
                const actualKey = keyValue.getAttribute('data-key');

                toggleBtn.addEventListener('click', function (e) {
                    e.preventDefault();
                    keyVisible = !keyVisible;

                    if (keyVisible) {
                        keyValue.textContent = actualKey;
                        keyToggleText.textContent = 'éšè—';
                        if (copyKeyBtn) copyKeyBtn.style.display = 'block';
                    } else {
                        keyValue.textContent = 'â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢';
                        keyToggleText.textContent = 'æ˜¾ç¤º';
                        if (copyKeyBtn) copyKeyBtn.style.display = 'none';
                    }
                });
            }
        }

        // ç¡®ä¿ DOM åŠ è½½å®Œæˆ
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', init);
        } else {
            init();
        }
    })();
</script>

<style>
    .gradient-text {
        background: linear-gradient(135deg, #3b82f6 0%, #8b5cf6 100%);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
    }
</style>