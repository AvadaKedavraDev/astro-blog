---
// 文件名: src/pages/blog/[slug].astro
import ArticleLayout from "@layouts/ArticleLayout.astro";
import { getCollection } from "astro:content";

// 1. 生成所有文章的静态路径
export async function getStaticPaths() {
    const posts = await getCollection('blog');
    return posts.map(post => ({
        params: { slug: post.slug },
        props: { post },
    }));
}

// 2. 获取当前文章数据
const { post } = Astro.props;
const { Content } = await post.render();
---

<ArticleLayout {post}>
    <Content />
</ArticleLayout>