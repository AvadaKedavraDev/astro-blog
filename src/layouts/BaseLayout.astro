---
/**
 * @layout BaseLayout
 * @description åŸºç¡€å¸ƒå±€ç»„ä»¶ï¼Œæä¾›ç«™ç‚¹é€šç”¨çš„é¡µé¢ç»“æ„
 * @features SEOã€å¯¼èˆªæ ã€é¡µè„šã€Swup å…¼å®¹ã€ä¸»é¢˜åˆ‡æ¢ã€è¿”å›é¡¶éƒ¨ã€å¼€å±å¼¹çª—
 * @props title - é¡µé¢æ ‡é¢˜
 * @props description - é¡µé¢æè¿°ï¼ˆå¯é€‰ï¼‰
 * @props canonicalUrl - è§„èŒƒé“¾æ¥ï¼ˆå¯é€‰ï¼‰
 * @props ogImage - OG å›¾ç‰‡ï¼ˆå¯é€‰ï¼‰
 * @props hideTopNotification - æ˜¯å¦éšè—é¡¶éƒ¨é€šçŸ¥æ ï¼ˆå¯é€‰ï¼‰
 */
import "../styles/global.css";
import SEO from "@components/widgets/SEO.astro";
import Navigation from "@components/common/Navigation.astro";
import Footer from "@components/common/Footer.astro";
import ScrollToTop from "@components/ui/ScrollToTop.astro";
import SwupScrollConfig from "@components/common/SwupScrollConfig.astro";
import H2Animation from "@components/common/H2Animation.astro";
import SwupCompat from "@components/common/SwupCompat.astro";
import SplashModal from "@components/ui/SplashModal.astro";
import TopNotification from "@components/ui/TopNotification.astro";

export interface Props {
  title: string;
  description?: string;
  canonicalUrl?: string;
  ogImage?: string;
  hideTopNotification?: boolean;
  hideSplashModal?: boolean;
}

const {
  title,
  description = "ä¸€ä¸ªæç®€ç°ä»£çš„ä¸ªäººåšå®¢",
  canonicalUrl = Astro.url.href,
  ogImage,
  hideTopNotification = false,
  hideSplashModal = false,
} = Astro.props;

const fullTitle = title === "é¦–é¡µ" ? "Moonpeak" : `${title} â€” Moonpeak`;
---

<!doctype html>
<html lang="zh-CN" class="scroll-smooth antialiased">
  <head>
    <SEO title={fullTitle} {description} {canonicalUrl} {ogImage} />
    <meta name="baidu-site-verification" content="codeva-DaleZ0kdGN" />
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!-- ä¼˜åŒ–åçš„ faviconï¼šSVG æ ¼å¼ä»… 234 å­—èŠ‚ï¼Œç›¸æ¯”åŸ 1MB PNG å¤§å¹…å‡å°‘ -->
<link rel="icon" type="image/svg+xml" href="/favicon-optimized.svg" />
<!-- å›é€€ï¼šSafari å’Œæ—§æµè§ˆå™¨ä½¿ç”¨åŸå§‹ PNG -->
<link rel="alternate icon" type="image/png" href="/favicon.png" />
    
    {/* ===== å­—ä½“åŠ è½½ï¼ˆæœ¬åœ°ä¼˜å…ˆ + ç³»ç»Ÿåå¤‡ï¼‰ ===== */}
    {/* ä½¿ç”¨æœ¬åœ°å­—ä½“æ–‡ä»¶ï¼Œä¸ä¾èµ–å¤–éƒ¨ CDN */}
    <link rel="stylesheet" href="/fonts/fonts.css">
    
    {/* ä¸»é¢˜åˆå§‹åŒ– - å¿…é¡»åœ¨æœ€å‰é¢æ‰§è¡Œï¼Œé˜²æ­¢é—ªçƒ */}
    <script is:inline>
      // @ts-nocheck - è¿™æ˜¯ä¸€ä¸ªçº¯ JavaScript æ–‡ä»¶ï¼Œç¦ç”¨ TypeScript æ£€æŸ¥
      (function() {
        const theme = localStorage.getItem('theme') || 
          (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light');
        
        if (theme === 'dark') {
          document.documentElement.classList.add('dark');
        } else {
          document.documentElement.classList.remove('dark');
        }
      })();
    </script>
    

  </head>

  <body class="min-h-screen bg-background text-foreground">
    <SwupCompat />
    <SwupScrollConfig />
    <H2Animation/>
    
    {/* é¡¶éƒ¨é€šçŸ¥æ æ’æ§½ - å¯é€šè¿‡ slot è‡ªå®šä¹‰æˆ–ä½¿ç”¨é»˜è®¤ */}
    {!hideTopNotification && (
      <slot name="top-notification">
        {/* é»˜è®¤é¡¶éƒ¨é€šçŸ¥æ  - å¦‚éœ€å¯ç”¨ï¼Œå–æ¶ˆä¸‹é¢çš„æ³¨é‡Šå¹¶ä¿®æ”¹å†…å®¹ */}
        {/*
        <TopNotification
          type="info"
          message="ğŸ‰ æ¬¢è¿æ¥åˆ° Moonpeakï¼"
          dismissible={true}
        />
        */}
      </slot>
    )}
    
    <Navigation />
    
    <main id="swup" class="pt-16 transition-fade">
      <slot />
    </main>
    
    <Footer />
    <ScrollToTop />
    
    {/* å¼€å±å¼¹çª—æ’æ§½ - å¯é€šè¿‡ slot è‡ªå®šä¹‰æˆ–ä½¿ç”¨é»˜è®¤ */}
    {!hideSplashModal && (
      <slot name="splash-modal">
        {/* é»˜è®¤å¼€å±å¼¹çª— - å¦‚éœ€å¯ç”¨ï¼Œå–æ¶ˆä¸‹é¢çš„æ³¨é‡Šå¹¶ä¿®æ”¹å†…å®¹ */}
        {/*
        <SplashModal
          title="æ¬¢è¿è®¿é—® Moonpeak"
          description="è¿™æ˜¯ä¸€ä¸ªæç®€ç°ä»£çš„ä¸ªäººåšå®¢ï¼Œè®°å½•æŠ€æœ¯ä¸ç”Ÿæ´»ã€‚"
          buttonText="å¼€å§‹æ¢ç´¢"
          buttonLink="/about"
          showOncePerSession={true}
        />
        */}
      </slot>
    )}
    
    <slot name="footer-scripts" />
  </body>
</html>
